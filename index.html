<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Roue automatique avec son</title>
    <style>
        body {
            background: #000;
            color: white;
            font-family: sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }
        #wheel {
            width: 90vmin;
            height: 90vmin;
        }
    </style>
</head>
<body>
    <canvas id="wheel"></canvas>
    <audio id="spinSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_9b0e8c97ae.mp3?filename=spin-swoosh-8997.mp3"></audio>
    <audio id="winSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_1961fbf6dc.mp3?filename=success-fanfare-trumpets-6185.mp3"></audio>

    <script>
        const segments = [
            "La roue des likes", "CamÃ©ra", "Costard", "Map", "Voiture", "Prilium", "Follow"
        ];
        const canvas = document.getElementById("wheel");
        const ctx = canvas.getContext("2d");
        const size = canvas.width = canvas.height = 600;
        const center = size / 2;
        const arcSize = 2 * Math.PI / segments.length;
        let rotation = 0;
        let speed = 0;
        let spinning = false;

        const spinSound = document.getElementById("spinSound");
        const winSound = document.getElementById("winSound");

        function drawWheel() {
            ctx.clearRect(0, 0, size, size);
            segments.forEach((text, i) => {
                const angle = arcSize * i + rotation;
                ctx.beginPath();
                ctx.moveTo(center, center);
                ctx.arc(center, center, center, angle, angle + arcSize);
                ctx.fillStyle = i % 2 === 0 ? '#00C896' : '#FFC738';
                ctx.fill();
                ctx.stroke();
                ctx.save();
                ctx.translate(center, center);
                ctx.rotate(angle + arcSize / 2);
                ctx.fillStyle = "#000";
                ctx.font = "bold 16px sans-serif";
                ctx.textAlign = "right";
                ctx.fillText("TEXTE", center - 10, 10); // placeholder text
                ctx.restore();
            });
        }

        function spin() {
            if (spinning) return;
            spinSound.play();
            speed = Math.random() * 0.3 + 0.25;
            spinning = true;
            requestAnimationFrame(animate);
        }

        function animate() {
            if (!spinning) return;
            rotation += speed;
            speed *= 0.985;
            if (speed < 0.002) {
                spinning = false;
                speed = 0;
                winSound.play();
                setTimeout(() => window.location.href = "about:blank", 1000);
            } else {
                requestAnimationFrame(animate);
            }
            drawWheel();
        }

        drawWheel();
        setTimeout(spin, 500);
    </script>
</body>
</html>
